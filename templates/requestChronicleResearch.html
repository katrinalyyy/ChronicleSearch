<!DOCTYPE html>
<html lang="ru">
<head>
    <title>Корзина - Культура.РФ</title>
    <link rel="stylesheet" href="/static/styles/requestChronicleResearch_style2.css">
</head>
<body>
    <header>
        <div class="logo-container">
            <a href="/chronicles" class="logo-link">
                <img src="/static/img/cultlogo.png" alt="Культура.РФ">
            </a>
        </div>
    </header>


    <main class="research-container">
        {{ if .error }}
            <h1 style="color: #850000; text-align: center; margin-top: 100px;">{{ .error }}</h1>
            <div style="text-align: center; margin-top: 30px;">
                <a href="/chronicles" style="background-color: #850000; color: white; padding: 12px 24px; border-radius: 8px; text-decoration: none;">Вернуться к летописям</a>
            </div>
        {{ else }}

            <h1>ЛÉТОПИСИ ИССЛЕДОВАНИЕ</h1>
            
            <div class="search-section">
                <div class="search-container">
                    <input type="text" value="{{ .requestChronicleResearch.SearchEvent }}" class="search-input search-input-filled">
                </div>
                <div class="name-event">
                    <input type="text" value="{{ .requestChronicleResearch.Name }}" class="name-event-input name-event-filled">
                </div>
            </div>

            <div style="text-align: center; margin-bottom: 30px;">
                <form action="/chronicle-research/{{ .requestChronicleResearch.ID }}/delete-request" method="POST">
                    <button type="submit" class="delete-request">
                        Удалить заявку
                    </button>
                </form>
            </div>



        
            <div class="table-header">
                <div class="col-title">Название документа</div>
                <div class="col-author">Автор(ы)</div>
                <div class="col-date">Дата создания</div>
                <div class="col-time">Время действия</div>
                <div class="col-place">Место</div>
                <div class="col-availability">Наличие</div>
                <div class="col-status"></div>
            </div>
            
            <div class="chronicles-list">
                {{ range $index, $research := .research }}
                {{ range $.resources }}
                    {{ if eq .ID $research.IDResource }}
                        <div class="chronicle-row">
                            <div class="chronicle-info">
                                <img src="{{ .Image }}" alt="{{ .Title }}" class="chronicle-image">
                                <div class="chronicle-details">
                                    <h3>{{ .Title }}</h3>
                                </div>
                            </div>
                            <div class="col-author">{{ .Author }}</div>
                            <div class="col-date">{{ .DateOfCreation }}</div>
                            <div class="col-time">{{ .TimeOfAction }}</div>
                            <div class="col-place">{{ .Location }}</div>
                            <div class="col-availability">
                                <input type="text" value="{{ $research.Quote }}" class="availability-input">
                            </div>
                            <div class="col-status">
                                <div class="status-indicator {{ if $research.IsMatched }}matched{{ else }}not-matched{{ end }}">
                                    <span class="status-icon">{{ if $research.IsMatched }}✓{{ else }}✗{{ end }}</span>
                                </div>
                            </div>
                        </div>
                    {{ end }}
                {{ end }}
                {{ end }}
            </div>

        {{ end }}

    </main>

    <footer class="site-footer">
        <div class="footer-content">
            <div class="footer-text-container">
                <span class="first-letter">К</span>
                <div class="footer-text">
                    "Культура.РФ" - гуманитарный просветительский проект, посвященный описанию исторических событий с комментариями на выбранные источники. Предоставление летописей и других первичных источников с отрывками текста.
                </div>
            </div>
        </div>
    </footer>
</body>
</html>